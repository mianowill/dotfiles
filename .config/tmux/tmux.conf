# --- General ---
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g history-limit 50000
set -g status-position bottom
set -g default-terminal "tmux-256color" 

# Enable Allow Passthrough (important for image previews/hyperlinks in modern tmux)
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

# Enable Hyperlinks
set -ga terminal-features "*:hyperlinks"

# Enable OSC 52 clipboard (works with iTerm2, Alacritty, Kitty, Windows Terminal)
set -s set-clipboard on 

# --- Key Bindings ---
unbind C-b
set-option -g prefix C-Space
bind C-Space send-prefix

unbind '"'
unbind %
bind v split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Easy reloading
bind R source ~/.config/tmux/tmux.conf \; display "tmux.conf sourced!"

# Window/Pane Management
bind m choose-window -F "#{window_index}: #{window_name}" "join-pane -h -t %%"
bind M choose-window -F "#{window_index}: #{window_name}" "join-pane -v -t %%"

# --- Plugins ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @emulate-scroll-for-no-mouse-alternate-buffer "on"

# Standard clipboard plugin
set -g @plugin 'tmux-plugins/tmux-yank' 
set -g @yank_selection 'clipboard'
set -g @yank_selection_mouse 'clipboard'

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

# Theme
set -g @plugin 'catppuccin/tmux#v0.3.0'
set -g @catppuccin_flavor 'mocha'
set -g @catppuccin_window_current_text "#W"
set -g @catppuccin_window_default_text "#W"

# Initialise plugin manager (keep this line at the very bottom)
run '~/.config/tmux/plugins/tpm/tpm'
